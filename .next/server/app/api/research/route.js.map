{"version":3,"file":"app/api/research/route.js","mappings":"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","sources":["webpack://_N_E/./server/promptTemplates.ts","webpack://_N_E/./app/api/research/route.ts","webpack://_N_E/./app/api/research/route.ts?f598","webpack://_N_E/?d00e","webpack://_N_E/external commonjs \"node:buffer\"","webpack://_N_E/external commonjs \"node:async_hooks\""],"sourcesContent":["export const researchPrompt = ({ role, tasks, resume }: any) => `\nYou are an AI researcher gathering *verifiable* evidence (URLs required).\nRole: ${role}\nWeekly task split: ${JSON.stringify(tasks)}\nResume snippet: ${resume?.slice(0, 600)}\n\nInstructions:\n1. For each task list\n   a) risk rating (High | Moderate | Low)\n   b) real product/tool proof\n   c) source URL.\n2. Provide 3-5 macro stats on AI adoption or job-impact for this role.\n3. Return strict JSON: {\"taskFacts\":[...],\"macroStats\":[...]}\nNO speculation—only sources you can cite.\n`;\n\nexport const analysisPrompt = (json: string) => `\nSYSTEM: Generate AI-replacement analysis with no hallucination.\nINPUT_JSON = ${json}\n\nRules:\n• Compute score S = Σ(hours × weight), High 1 · Moderate 0.6 · Low 0.3.\n• Output:\n   PREVIEW ≤180 words + score + 1 tip\n   ---FULL_REPORT---\n   full markdown report (headings, timeline, mitigation, citations)\n• Inline-cite using [1], [2] matching INPUT_JSON URLs.\n• If no sources → reply \"INSUFFICIENT DATA\".\n`; ","import { NextRequest, NextResponse } from 'next/server';\nimport { createClient } from '@supabase/supabase-js';\nimport OpenAI from 'openai';\nimport { researchPrompt } from '@/server/promptTemplates';\n\nexport const runtime = 'edge';\n\n// Function to sanitize text for database insertion\nfunction sanitizeText(text: string): string {\n  if (!text) return '';\n  \n  return text\n    // Remove null bytes and other problematic Unicode characters\n    .replace(/\\0/g, '')\n    // Normalize Unicode\n    .normalize('NFC')\n    // Remove or replace problematic escape sequences\n    .replace(/\\\\u[0-9a-fA-F]{4}/g, (match) => {\n      try {\n        return JSON.parse(`\"${match}\"`);\n      } catch {\n        return '';\n      }\n    })\n    // Limit length to prevent oversized content\n    .substring(0, 50000);\n}\n\nexport async function POST(req: NextRequest) {\n  console.log('🔍 [Research API] Starting request...');\n  \n  try {\n    const body = await req.json();\n    console.log('📋 [Research API] Request body:', JSON.stringify(body, null, 2));\n    \n    const { role, tasks, resume } = body;\n\n    // Validate required fields\n    if (!role) {\n      console.error('❌ [Research API] Missing role field');\n      return NextResponse.json({ error: 'Role is required' }, { status: 400 });\n    }\n\n    // Sanitize text inputs\n    const sanitizedRole = sanitizeText(role);\n    const sanitizedResume = sanitizeText(resume || '');\n    \n    console.log('🧹 [Research API] Text sanitization complete');\n    console.log('📏 [Research API] Sanitized resume length:', sanitizedResume.length);\n\n    console.log('🔗 [Research API] Creating Supabase client...');\n    const supabase = createClient(\n      process.env.SUPABASE_URL!,\n      process.env.SUPABASE_SERVICE_ROLE_KEY!\n    );\n    console.log('✅ [Research API] Supabase client created');\n\n    console.log('💾 [Research API] Inserting profile into database...');\n    const { data: profile, error: dbError } = await supabase\n      .from('profiles')\n      .insert([{ \n        role: sanitizedRole, \n        resume: sanitizedResume, \n        task_hours: tasks || {},\n        email: null // We're not collecting email in the current flow\n      }])\n      .select()\n      .single();\n\n    if (dbError) {\n      console.error('❌ [Research API] Database error:', dbError);\n      return NextResponse.json({ error: 'Database error: ' + dbError.message }, { status: 500 });\n    }\n\n    console.log('✅ [Research API] Profile created:', profile);\n\n    console.log('🤖 [Research API] Creating OpenAI client...');\n    const openai = new OpenAI({ \n      apiKey: process.env.OPENAI_API_KEY,\n      timeout: 30000 // 30 second timeout\n    });\n\n    console.log('📝 [Research API] Generating research prompt...');\n    const prompt = researchPrompt({ role: sanitizedRole, tasks, resume: sanitizedResume });\n    console.log('📄 [Research API] Prompt length:', prompt.length);\n\n    console.log('🚀 [Research API] Calling OpenAI API...');\n    const research = await openai.chat.completions.create({\n      model: 'gpt-4o',\n      temperature: 0.2,\n      messages: [{ role: 'system', content: prompt }]\n    });\n\n    console.log('✅ [Research API] OpenAI response received');\n    console.log('📊 [Research API] Response usage:', research.usage);\n\n    const responseContent = research.choices[0].message.content;\n    console.log('📄 [Research API] Response content:', responseContent?.substring(0, 500) + '...');\n\n    if (!responseContent) {\n      console.error('❌ [Research API] Empty response from OpenAI');\n      return NextResponse.json({ error: 'Empty response from AI' }, { status: 500 });\n    }\n\n    console.log('🔧 [Research API] Parsing JSON response...');\n    let evidence;\n    try {\n      evidence = JSON.parse(responseContent);\n      console.log('✅ [Research API] JSON parsed successfully');\n    } catch (parseError) {\n      console.error('❌ [Research API] JSON parse error:', parseError);\n      console.log('📄 [Research API] Raw content that failed to parse:', responseContent);\n      return NextResponse.json({ error: 'Invalid AI response format' }, { status: 500 });\n    }\n\n    console.log('🔥 [Research API] Triggering analysis (fire-and-forget)...');\n    // Fire-and-forget analysis\n    const analysisUrl = `${process.env.NEXT_PUBLIC_SITE_URL}/api/analyze`;\n    console.log('🎯 [Research API] Analysis URL:', analysisUrl);\n    \n    fetch(analysisUrl, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ profile_id: profile.id, evidence })\n    }).catch(error => {\n      console.error('❌ [Research API] Analysis trigger failed:', error);\n    });\n\n    console.log('✅ [Research API] Request completed successfully');\n    return NextResponse.json({ status: 'processing', profile_id: profile.id });\n\n  } catch (error) {\n    console.error('💥 [Research API] Unexpected error:', error);\n    console.error('📚 [Research API] Error stack:', error instanceof Error ? error.stack : 'No stack trace');\n    return NextResponse.json(\n      { error: 'Internal server error: ' + (error instanceof Error ? error.message : String(error)) }, \n      { status: 500 }\n    );\n  }\n} ","import { AppRouteRouteModule } from \"next/dist/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/server/lib/patch-fetch\";\nimport * as userland from \"/Users/miguel/Downloads/AICareerShield/app/api/research/route.ts\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/research/route\",\n        pathname: \"/api/research\",\n        filename: \"route\",\n        bundlePath: \"app/api/research/route\"\n    },\n    resolvedPagePath: \"/Users/miguel/Downloads/AICareerShield/app/api/research/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\n\n//# sourceMappingURL=app-route.js.map","var _self___RSC_MANIFEST;\nimport { createServerModuleMap } from \"next/dist/server/app-render/action-utils\";\nimport { setReferenceManifestsSingleton } from \"next/dist/server/app-render/encryption-utils\";\nimport { EdgeRouteModuleWrapper } from \"next/dist/server/web/edge-route-module-wrapper\";\n// Import the userland code.\nimport * as module from \"next-app-loader?name=app%2Fapi%2Fresearch%2Froute&page=%2Fapi%2Fresearch%2Froute&pagePath=private-next-app-dir%2Fapi%2Fresearch%2Froute.ts&appDir=%2FUsers%2Fmiguel%2FDownloads%2FAICareerShield%2Fapp&appPaths=%2Fapi%2Fresearch%2Froute&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!private-next-app-dir/api/research/route.ts?__next_edge_ssr_entry__\";\nconst nextConfig = {\"env\":{},\"webpack\":null,\"eslint\":{\"ignoreDuringBuilds\":false},\"typescript\":{\"ignoreBuildErrors\":false,\"tsconfigPath\":\"tsconfig.json\"},\"distDir\":\".next\",\"cleanDistDir\":true,\"assetPrefix\":\"\",\"cacheMaxMemorySize\":52428800,\"configOrigin\":\"next.config.js\",\"useFileSystemPublicRoutes\":true,\"generateEtags\":true,\"pageExtensions\":[\"tsx\",\"ts\",\"jsx\",\"js\"],\"poweredByHeader\":true,\"compress\":true,\"images\":{\"deviceSizes\":[640,750,828,1080,1200,1920,2048,3840],\"imageSizes\":[16,32,48,64,96,128,256,384],\"path\":\"/_next/image\",\"loader\":\"default\",\"loaderFile\":\"\",\"domains\":[],\"disableStaticImages\":false,\"minimumCacheTTL\":60,\"formats\":[\"image/webp\"],\"dangerouslyAllowSVG\":false,\"contentSecurityPolicy\":\"script-src 'none'; frame-src 'none'; sandbox;\",\"contentDispositionType\":\"attachment\",\"remotePatterns\":[],\"unoptimized\":false},\"devIndicators\":{\"position\":\"bottom-left\"},\"onDemandEntries\":{\"maxInactiveAge\":60000,\"pagesBufferLength\":5},\"amp\":{\"canonicalBase\":\"\"},\"basePath\":\"\",\"sassOptions\":{},\"trailingSlash\":false,\"i18n\":null,\"productionBrowserSourceMaps\":false,\"excludeDefaultMomentLocales\":true,\"serverRuntimeConfig\":{},\"publicRuntimeConfig\":{},\"reactProductionProfiling\":false,\"reactStrictMode\":null,\"reactMaxHeadersLength\":6000,\"httpAgentOptions\":{\"keepAlive\":true},\"logging\":{},\"expireTime\":31536000,\"staticPageGenerationTimeout\":60,\"modularizeImports\":{\"@mui/icons-material\":{\"transform\":\"@mui/icons-material/{{member}}\"},\"lodash\":{\"transform\":\"lodash/{{member}}\"}},\"outputFileTracingRoot\":\"/Users/miguel/Downloads/AICareerShield\",\"experimental\":{\"nodeMiddleware\":false,\"cacheLife\":{\"default\":{\"stale\":300,\"revalidate\":900,\"expire\":4294967294},\"seconds\":{\"stale\":0,\"revalidate\":1,\"expire\":60},\"minutes\":{\"stale\":300,\"revalidate\":60,\"expire\":3600},\"hours\":{\"stale\":300,\"revalidate\":3600,\"expire\":86400},\"days\":{\"stale\":300,\"revalidate\":86400,\"expire\":604800},\"weeks\":{\"stale\":300,\"revalidate\":604800,\"expire\":2592000},\"max\":{\"stale\":300,\"revalidate\":2592000,\"expire\":4294967294}},\"cacheHandlers\":{},\"cssChunking\":true,\"multiZoneDraftMode\":false,\"appNavFailHandling\":false,\"prerenderEarlyExit\":true,\"serverMinification\":true,\"serverSourceMaps\":false,\"linkNoTouchStart\":false,\"caseSensitiveRoutes\":false,\"clientSegmentCache\":false,\"dynamicOnHover\":false,\"preloadEntriesOnStart\":true,\"clientRouterFilter\":true,\"clientRouterFilterRedirects\":false,\"fetchCacheKeyPrefix\":\"\",\"middlewarePrefetch\":\"flexible\",\"optimisticClientCache\":true,\"manualClientBasePath\":false,\"cpus\":13,\"memoryBasedWorkersCount\":false,\"imgOptConcurrency\":null,\"imgOptTimeoutInSeconds\":7,\"imgOptMaxInputPixels\":268402689,\"imgOptSequentialRead\":null,\"isrFlushToDisk\":true,\"workerThreads\":false,\"optimizeCss\":false,\"nextScriptWorkers\":false,\"scrollRestoration\":false,\"externalDir\":false,\"disableOptimizedLoading\":false,\"gzipSize\":true,\"craCompat\":false,\"esmExternals\":true,\"fullySpecified\":false,\"swcTraceProfiling\":false,\"forceSwcTransforms\":false,\"largePageDataBytes\":128000,\"typedRoutes\":false,\"typedEnv\":false,\"parallelServerCompiles\":false,\"parallelServerBuildTraces\":false,\"ppr\":false,\"authInterrupts\":false,\"webpackMemoryOptimizations\":false,\"optimizeServerReact\":true,\"useEarlyImport\":false,\"viewTransition\":false,\"routerBFCache\":false,\"staleTimes\":{\"dynamic\":0,\"static\":300},\"serverComponentsHmrCache\":true,\"staticGenerationMaxConcurrency\":8,\"staticGenerationMinPagesPerWorker\":25,\"dynamicIO\":false,\"inlineCss\":false,\"useCache\":false,\"optimizePackageImports\":[\"lucide-react\",\"date-fns\",\"lodash-es\",\"ramda\",\"antd\",\"react-bootstrap\",\"ahooks\",\"@ant-design/icons\",\"@headlessui/react\",\"@headlessui-float/react\",\"@heroicons/react/20/solid\",\"@heroicons/react/24/solid\",\"@heroicons/react/24/outline\",\"@visx/visx\",\"@tremor/react\",\"rxjs\",\"@mui/material\",\"@mui/icons-material\",\"recharts\",\"react-use\",\"effect\",\"@effect/schema\",\"@effect/platform\",\"@effect/platform-node\",\"@effect/platform-browser\",\"@effect/platform-bun\",\"@effect/sql\",\"@effect/sql-mssql\",\"@effect/sql-mysql2\",\"@effect/sql-pg\",\"@effect/sql-squlite-node\",\"@effect/sql-squlite-bun\",\"@effect/sql-squlite-wasm\",\"@effect/sql-squlite-react-native\",\"@effect/rpc\",\"@effect/rpc-http\",\"@effect/typeclass\",\"@effect/experimental\",\"@effect/opentelemetry\",\"@material-ui/core\",\"@material-ui/icons\",\"@tabler/icons-react\",\"mui-core\",\"react-icons/ai\",\"react-icons/bi\",\"react-icons/bs\",\"react-icons/cg\",\"react-icons/ci\",\"react-icons/di\",\"react-icons/fa\",\"react-icons/fa6\",\"react-icons/fc\",\"react-icons/fi\",\"react-icons/gi\",\"react-icons/go\",\"react-icons/gr\",\"react-icons/hi\",\"react-icons/hi2\",\"react-icons/im\",\"react-icons/io\",\"react-icons/io5\",\"react-icons/lia\",\"react-icons/lib\",\"react-icons/lu\",\"react-icons/md\",\"react-icons/pi\",\"react-icons/ri\",\"react-icons/rx\",\"react-icons/si\",\"react-icons/sl\",\"react-icons/tb\",\"react-icons/tfi\",\"react-icons/ti\",\"react-icons/vsc\",\"react-icons/wi\"]},\"htmlLimitedBots\":\"Mediapartners-Google|Slurp|DuckDuckBot|baiduspider|yandex|sogou|bitlybot|tumblr|vkShare|quora link preview|redditbot|ia_archiver|Bingbot|BingPreview|applebot|facebookexternalhit|facebookcatalog|Twitterbot|LinkedInBot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|Yeti\",\"bundlePagesRouterDependencies\":false,\"configFile\":\"/Users/miguel/Downloads/AICareerShield/next.config.js\",\"configFileName\":\"next.config.js\",\"serverExternalPackages\":[\"pdf-parse\"],\"turbopack\":{\"root\":\"/Users/miguel/Downloads/AICareerShield\"}}\nconst maybeJSONParse = (str)=>str ? JSON.parse(str) : undefined;\nconst rscManifest = (_self___RSC_MANIFEST = self.__RSC_MANIFEST) == null ? void 0 : _self___RSC_MANIFEST[\"/api/research/route\"];\nconst rscServerManifest = maybeJSONParse(self.__RSC_SERVER_MANIFEST);\nif (rscManifest && rscServerManifest) {\n    setReferenceManifestsSingleton({\n        page: \"/api/research/route\",\n        clientReferenceManifest: rscManifest,\n        serverActionsManifest: rscServerManifest,\n        serverModuleMap: createServerModuleMap({\n            serverActionsManifest: rscServerManifest\n        })\n    });\n}\nexport const ComponentMod = module;\nexport default EdgeRouteModuleWrapper.wrap(module.routeModule, {\n    nextConfig\n});\n\n//# sourceMappingURL=edge-app-route.js.map","module.exports = require(\"node:buffer\");","module.exports = require(\"node:async_hooks\");"],"names":["researchPrompt","role","tasks","resume","JSON","stringify","slice","json","runtime","sanitizeText","text","replace","normalize","parse","match","substring","POST","req","console","log","evidence","body","error","NextResponse","status","sanitizedRole","sanitizedResume","length","supabase","createClient","process","env","SUPABASE_URL","SUPABASE_SERVICE_ROLE_KEY","data","profile","dbError","from","insert","task_hours","email","select","single","message","openai","OpenAI","apiKey","OPENAI_API_KEY","timeout","prompt","research","chat","completions","create","model","temperature","messages","content","usage","responseContent","choices","parseError","analysisUrl","NEXT_PUBLIC_SITE_URL","fetch","method","headers","profile_id","id","catch","Error","stack","String"],"sourceRoot":"","ignoreList":[]}