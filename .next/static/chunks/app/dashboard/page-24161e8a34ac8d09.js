(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1243:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2894:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]])},3109:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},3999:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var r=t(2596),a=t(9688);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}},4692:(e,s,t)=>{"use strict";t.d(s,{Q:()=>i});var r=t(5155),a=t(2115),l=t(3999);function i(e){let{score:s,size:t=120,className:i}=e,[n,c]=(0,a.useState)(0);(0,a.useEffect)(()=>{let e=setTimeout(()=>{c(s)},500);return()=>clearTimeout(e)},[s]);let d=(t-8)/2,o=2*d*Math.PI,x=e=>e<=33?"text-green-600 stroke-green-600":e<=66?"text-amber-600 stroke-amber-600":"text-red-600 stroke-red-600";return(0,r.jsxs)("div",{className:(0,l.cn)("relative inline-flex items-center justify-center",i),style:{width:t,height:t},children:[(0,r.jsxs)("svg",{width:t,height:t,className:"transform -rotate-90",children:[(0,r.jsx)("circle",{cx:t/2,cy:t/2,r:d,stroke:"currentColor",strokeWidth:"6",fill:"transparent",className:"text-slate-200"}),(0,r.jsx)("circle",{cx:t/2,cy:t/2,r:d,strokeWidth:"6",fill:"transparent",strokeDasharray:o,strokeDashoffset:o-n/100*o,strokeLinecap:"round",className:(0,l.cn)("transition-all duration-1000 ease-out",x(s))})]}),(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,r.jsx)("div",{className:(0,l.cn)("text-2xl font-bold",x(s)),children:Math.round(n)}),(0,r.jsx)("div",{className:"text-xs text-slate-500 font-medium",children:s<=33?"Low Risk":s<=66?"Moderate Risk":"High Risk"})]})]})}},7107:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b,dynamic:()=>g});var r=t(5155),a=t(2115),l=t(5695),i=t(1976),n=t(7168),c=t(8482),d=t(8145),o=t(4692),x=t(7550),m=t(1243);let h=(0,t(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var p=t(7434),u=t(9074),f=t(2894),j=t(3109);let g="force-dynamic";function b(){var e,s,t,g,b,v,N,y,k,w;let A=(0,l.useRouter)(),{isSignedIn:C,isLoaded:R,user:W}=(0,i.Jd)(),[S,Z]=(0,a.useState)([]),[M,z]=(0,a.useState)(!0),[B,L]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(R){if(!C)return void A.push("/sign-in");(async()=>{try{var e;console.log("\uD83D\uDCCA [Dashboard] Fetching user reports...");let s=await fetch("/api/user-reports");if(!s.ok)throw Error("Failed to fetch reports: ".concat(s.status));let t=await s.json();console.log("✅ [Dashboard] Reports fetched:",(null==(e=t.reports)?void 0:e.length)||0),Z(t.reports||[])}catch(e){console.error("❌ [Dashboard] Error fetching reports:",e),L(e instanceof Error?e.message:"Failed to load reports")}finally{z(!1)}})()}},[C,R,A]);let D=e=>e<=33?{label:"Low Risk",color:"text-green-600",bgColor:"bg-green-100"}:e<=66?{label:"Moderate Risk",color:"text-amber-600",bgColor:"bg-amber-100"}:{label:"High Risk",color:"text-red-600",bgColor:"bg-red-100"};return!R||M?(0,r.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-600",children:"Loading your dashboard..."})]})}):B?(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("div",{className:"bg-white border-b border-slate-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)(n.$,{variant:"ghost",onClick:()=>A.push("/"),className:"mr-4",children:[(0,r.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),(0,r.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"Your Dashboard"})]})})})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,r.jsx)(c.Zp,{className:"max-w-md mx-auto text-center",children:(0,r.jsxs)(c.Wu,{className:"p-8",children:[(0,r.jsx)(m.A,{className:"w-16 h-16 text-amber-500 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Unable to Load Reports"}),(0,r.jsx)("p",{className:"text-slate-600 mb-4",children:B}),(0,r.jsx)(n.$,{onClick:()=>window.location.reload(),children:"Try Again"})]})})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("div",{className:"bg-white border-b border-slate-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)(n.$,{variant:"ghost",onClick:()=>A.push("/"),className:"mr-4",children:[(0,r.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),(0,r.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"Your Dashboard"})]}),(0,r.jsxs)(n.$,{onClick:()=>A.push("/intake?from=dashboard"),children:[(0,r.jsx)(h,{className:"w-4 h-4 mr-2"}),"New Assessment"]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:["Welcome back, ",(null==W?void 0:W.firstName)||"there","!"]}),(0,r.jsx)("p",{className:"text-slate-600 mb-6",children:"Track your AI career risk assessments and monitor changes over time."}),S.length>0&&(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-6",children:[(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{className:"pb-2",children:(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-slate-600",children:"Current Role"})}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsx)("div",{className:"text-lg font-semibold text-slate-900",children:(null==(e=S[0])?void 0:e.profile.role)||"Not specified"}),(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:(null==(s=S[0])?void 0:s.profile.careerCategory)?S[0].profile.careerCategory.replace("-"," "):"Latest assessment"})]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{className:"pb-2",children:(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-slate-600",children:"Experience Level"})}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsx)("div",{className:"text-lg font-semibold text-slate-900",children:(null==(t=S[0])?void 0:t.profile.yearsExperience)||"Not specified"}),(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Years of experience"})]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{className:"pb-2",children:(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-slate-600",children:"Company Size"})}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsx)("div",{className:"text-lg font-semibold text-slate-900 capitalize",children:(null==(g=S[0])?void 0:g.profile.companySize)||"Not specified"}),(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Organization type"})]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{className:"pb-2",children:(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-slate-600",children:"AI Analysis"})}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsxs)("div",{className:"text-lg font-semibold text-slate-900",children:[S.filter(e=>e.profile.hasLinkedinData).length,"/",S.length]}),(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"With LinkedIn data"})]})]})]}),S.length>0&&((null==(b=S[0])?void 0:b.profile.keySkills)||(null==(v=S[0])?void 0:v.profile.dailyWorkSummary))&&(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:[(null==(N=S[0])?void 0:N.profile.keySkills)&&(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{className:"pb-3",children:(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-slate-600",children:"Your Key Skills"})}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("p",{className:"text-sm text-slate-700 leading-relaxed",children:S[0].profile.keySkills})})]}),(null==(y=S[0])?void 0:y.profile.dailyWorkSummary)&&(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{className:"pb-3",children:(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-slate-600",children:"Your Daily Work"})}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("p",{className:"text-sm text-slate-700 leading-relaxed",children:S[0].profile.dailyWorkSummary})})]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Your Assessments"}),(0,r.jsxs)("div",{className:"text-sm text-slate-500",children:[S.length," assessment",1!==S.length?"s":""]})]}),0===S.length?(0,r.jsx)(c.Zp,{children:(0,r.jsxs)(c.Wu,{className:"p-8 text-center",children:[(0,r.jsx)(p.A,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No assessments yet"}),(0,r.jsx)("p",{className:"text-slate-600 mb-6",children:"Get started by creating your first AI career risk assessment."}),(0,r.jsxs)(n.$,{onClick:()=>A.push("/intake?from=dashboard"),children:[(0,r.jsx)(h,{className:"w-4 h-4 mr-2"}),"Start Assessment"]})]})}):(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:S.map(e=>{let s=D(e.score);return(0,r.jsxs)(c.Zp,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[(0,r.jsx)(c.aR,{className:"pb-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(c.ZB,{className:"text-lg",children:e.profile.role}),(0,r.jsxs)(c.BT,{className:"flex items-center mt-1",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-1"}),new Date(e.created_at).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"mt-3 space-y-1 text-xs text-slate-600",children:[e.profile.careerCategory&&(0,r.jsxs)("div",{children:["Category: ",e.profile.careerCategory]}),e.profile.yearsExperience&&(0,r.jsxs)("div",{children:["Experience: ",e.profile.yearsExperience]}),e.profile.companySize&&(0,r.jsxs)("div",{children:["Company: ",e.profile.companySize]}),e.profile.hasLinkedinData&&(0,r.jsxs)("div",{className:"flex items-center text-blue-600",children:[(0,r.jsx)(f.A,{className:"w-3 h-3 mr-1"}),"LinkedIn analyzed"]})]})]}),(0,r.jsx)(o.Q,{score:e.score,size:60})]})}),(0,r.jsx)(c.Wu,{className:"pt-0",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)(d.E,{variant:"secondary",className:"".concat(s.bgColor," ").concat(s.color),children:[(0,r.jsx)(m.A,{className:"w-3 h-3 mr-1"}),s.label]}),e.profile.dailyWorkSummary&&(0,r.jsxs)("div",{className:"text-xs text-slate-600",children:[(0,r.jsx)("div",{className:"font-medium mb-1",children:"Daily Work:"}),(0,r.jsxs)("div",{className:"overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:[e.profile.dailyWorkSummary.substring(0,100),e.profile.dailyWorkSummary.length>100&&"..."]})]}),e.profile.keySkills&&(0,r.jsxs)("div",{className:"text-xs text-slate-600",children:[(0,r.jsx)("div",{className:"font-medium mb-1",children:"Key Skills:"}),(0,r.jsxs)("div",{className:"truncate",children:[e.profile.keySkills.substring(0,80),e.profile.keySkills.length>80&&"..."]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm pt-2 border-t",children:[(0,r.jsx)("span",{className:"text-slate-600",children:"Risk Score"}),(0,r.jsxs)("span",{className:"font-semibold",children:[e.score,"/100"]})]}),(0,r.jsx)(n.$,{variant:"outline",size:"sm",className:"w-full",onClick:()=>A.push("/report?id=".concat(e.id,"&paid=true&from=dashboard")),children:"View Full Report"})]})})]},e.id)})})]}),S.length>0&&(0,r.jsxs)("div",{className:"mt-8 grid gap-6 md:grid-cols-3",children:[(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{className:"pb-2",children:(0,r.jsx)(c.ZB,{className:"text-base",children:"Latest Score"})}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-slate-900",children:[(null==(k=S[0])?void 0:k.score)||0,"/100"]}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:D((null==(w=S[0])?void 0:w.score)||0).label})]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{className:"pb-2",children:(0,r.jsx)(c.ZB,{className:"text-base",children:"Total Assessments"})}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:S.length}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:"Career evaluations completed"})]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{className:"pb-2",children:(0,r.jsx)(c.ZB,{className:"text-base",children:"Trend"})}),(0,r.jsx)(c.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(j.A,{className:"w-5 h-5 text-green-600 mr-2"}),(0,r.jsx)("span",{className:"text-sm text-slate-600",children:"Improving security"})]})})]})]})]})]})}},7168:(e,s,t)=>{"use strict";t.d(s,{$:()=>d});var r=t(5155),a=t(2115),l=t(9708),i=t(2085),n=t(3999);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:d=!1,...o}=e,x=d?l.DX:"button";return(0,r.jsx)(x,{className:(0,n.cn)(c({variant:a,size:i,className:t})),ref:s,...o})});d.displayName="Button"},7434:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7550:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8145:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var r=t(5155);t(2115);var a=t(2085),l=t(3999);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)(i({variant:t}),s),...a})}},8482:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>i,aR:()=>n});var r=t(5155),a=t(2115),l=t(3999);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},9074:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9813:(e,s,t)=>{Promise.resolve().then(t.bind(t,7107))}},e=>{var s=s=>e(e.s=s);e.O(0,[90,455,441,684,358],()=>s(9813)),_N_E=e.O()}]);